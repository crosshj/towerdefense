<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<link rel="stylesheet" href="styles.css" />
		<title>Sign Up</title>

	</head>
	<body>
		<div class="container">
			<h1>Sign Up</h1>
			<form id="signupForm" action="/signup" method="POST">
				<input
					id="email"
					type="email"
					name="email"
					placeholder="Email"
					autocomplete="off"
					required
				/>
				<input
					id="username"
					type="text"
					name="username"
					placeholder="Username"
					autocomplete="off"
					required
				/>
				<input
					id="password"
					type="password"
					name="password"
					placeholder="Password"
					autocomplete="off"
					required
				/>
				<button type="submit">Sign Up</button>
			</form>
		</div>

		<script>
			document
				.getElementById('signupForm')
				.addEventListener('submit', async function (event) {
					event.preventDefault();

					const name = document.getElementById('username').value;
					const email = document.getElementById('email').value;
					const password = document.getElementById('password').value;

					const response = await fetch(
						'https://datamosh.vercel.app/api/teedee/signUp',
						{
							method: 'POST',
							headers: {
								'Content-Type': 'application/json'
							},
							body: JSON.stringify({
								username: name,
								email: email,
								password: password
							})
						}
					);

					if (response.ok) {
						document.body.innerHTML =
							'Your account was created.  Check your email to verify.';
					} else {
						document.body.innerHTML = 'Signup failed.';
					}
				});
		</script>
	</body>
</html>
